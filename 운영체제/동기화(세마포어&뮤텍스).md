### **뮤텍스란?**  
Mutual Exclusion(상호배제) 를 위한 동기화 도구입니다.  
하나의 스레드나 프로세스만 Key(잠금) 를 얻어야 공유 자원에 접근할 수 있습니다.  
임계 영역(Critical Section)에서 단독 실행을 보장합니다.  

**동작 방식**  
1. 공유 자원에 접근하려는 스레드는 뮤텍스 lock을 시도합니다.  
2. lock을 획득한 스레드만 임계 영역에 진입할 수 있습니다.  
3. 작업이 끝나면 lock을 해제합니다.  
4. 다른 대기 중인 스레드가 lock을 얻고 작업을 수행합니다.  


**구현 예시 코드**
```java
acquire() {
    while (!available) {
        // lock을 얻기 위해 busy waiting
    }
    available = false; // lock 획득
}

release() {
    available = true; // lock 반납
}
```
**문제점**  
- lock을 기다리는 동안 계속 반복해서 체크하는 busy waiting 문제가 생길 수 있습니다.
- 이런 경우 CPU를 낭비하게 되고, 이를 SpinLock 이라고도 부릅니다.

### **세마포어란?**  
- 뮤텍스를 확장한 개념입니다.
- 뮤텍스는 1개만 lock 가능하지만, 세마포어는 n개의 허용치를 관리할 수 있습니다.
-  리소스에 대해 동시 접근 가능한 최대 수를 제한할 때 사용합니다.

**동작 방식**  
1. 세마포어는 정수 값을 가집니다.  
2. 자원을 사용할 때는 wait()으로 값을 감소시키고,  
3. 자원을 반환할 때는 signal()로 값을 증가시킵니다.  


**구현 예시 코드**
```java
wait(S) {
    while (S <= 0) {
        // busy waiting
    }
    S--; // 자원 획득
}

signal(S) {
    S++; // 자원 반납
}
```

**종류**
	•	카운팅 세마포어: 값이 0 이상인 모든 자연수 (다수 자원 관리)
	•	이진 세마포어(Binary Semaphore): 값이 0 또는 1만 가짐 (뮤텍스처럼 동작)


**block-wakeup 방식**  
busy waiting을 피하기 위해 세마포어 내부에 대기 큐를 두고, 자원이 없으면 프로세스를 block 시키고, signal로 다시 깨웁니다. 


### 뮤텍스와 세마포어 차이 
- 세마포어는 뮤텍스처럼 동작할 수 있지만, 그 반대는 불가능합니다.
- 뮤텍스는 내 것만 풀 수 있지만, 세마포어는 남 것도 풀 수 있습니다.

### **모니터란?**
- 세마포어의 문제점(타이밍 오류, deadlock 위험)을 해결하기 위해 등장했습니다.
- 프로그래밍 언어 차원(Java, Python 등)에서 상호 배제와 동기화를 자동으로 지원합니다.
- 락(lock)과 조건변수(condition variable)를 이용해 관리합니다.

**구성 요소**
- monitor lock: 모니터 진입 시 lock을 걸고, 나갈 때 해제 (자동 관리)
- condition variable: 특정 조건이 만족될 때까지 스레드를 기다리게 하는 변수 (wait, signal)

동작 흐름
1. 스레드가 모니터 안에 진입 → lock 획득
2. 이미 lock이 걸려있으면 대기 큐로 이동
3. 특정 조건이 충족되면 대기 큐에 있던 스레드를 다시 실행

**구현 예시 코드**
```java
synchronized (monitorObject) {
    while (!condition) {
        monitorObject.wait();  // 대기
    }
    // 임계 영역 작업 수행
}
```


### 요약
- 뮤텍스: 하나만 접근 가능 (0/1 상태), 소유자가 직접 해제해야 함
- 세마포어: n개 동시 접근 가능, 소유자 상관없이 해제 가능
- 모니터: 프로그래밍 언어에서 제공하는 고급 동기화 도구 (락, 조건변수)

복잡한 동기화 문제를 해결할 때는, 세마포어나 뮤텍스보다는 모니터 기반 동기화(synchronized, lock object 등) 를 사용하는 것이 안전하고 편리합니다.
