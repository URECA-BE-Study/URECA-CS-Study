# OSI 7계층이란?

네트워크 통신을 이해하기 위해 국제표준화기구(ISO)에서 제안한 **OSI(Open Systems Interconnection) 7계층 모델**은 네트워크의 계층별 역할을 정의한 모델이다.

이 모델을 통해 네트워크의 복잡한 구조를 7개의 단계로 나누어 이해하고, 각 계층의 기능을 명확히 구분할 수 있다.

![OSI 7계층](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbAOVE4%2FbtsL2QbXuu0%2F5qA12lmMuEmfsYhTbRYgWK%2Fimg.png)

---

# OSI 7계층 등장 배경

OSI 7계층(Open System Interconnection 7 Layer)은 ISO(국제 표준화 기구)에서 1977년에 발표한 네트워크 통신 프로토콜을 표준화하기 위해 등장하였다.

당시에는 서로 다른 통신 시스템이 존재했고, 네트워크 장비를 업체마다 제각각 만들면서 결국 통신 과정에서 여러 가지 충돌이 생길 수 있는 상황이었다.

따라서, 네트워크의 구조에 대한 호환성을 향상시키고, 네트워크 간 통신 시스템을 통합하기 위해 등장한 표준화된 모델 중 하나가 OSI 7계층이다.

---

# 캡슐화란?

캡슐화(Encapsulation)는 OSI 7계층에서 데이터가 전송될 때 각 계층별로 헤더(Header)와 데이터를 감싸면서 하위 계층으로 전달하는 과정이다. 

이 과정에서 상위 계층의 데이터는 하위 계층에서 추가적인 정보(헤더)를 포함하여 새로운 데이터 단위로 변환되며, 최종적으로 네트워크를 통해 전송된다. 

캡슐화 과정은 데이터가 수신 측에서 역순으로 해제(디캡슐화)되어 원래의 데이터로 복원되는 방식으로 작동한다. 이를 통해 네트워크 통신의 일관성과 안정성이 보장된다.

---

## **1. 물리 계층 (Physical Layer)**

**역할:** 네트워크 전송 매체를 통해 데이터를 전송하기 위한 기초적인 기능을 수행합니다. 데이터는 전기 신호(유선)나 무선 신호로 변환되어 전송된다.

**주요 기능:**

- 비트(Bit) 단위의 데이터 전송
- 신호 변환 및 변조(Encoding, Decoding)
- 전송 속도와 물리적 연결 방식 정의

**대표적인 장비 및 프로토콜:**

- 리피터(Repeater), 허브(Hub)

---

## **2. 데이터 링크 계층 (Data Link Layer)**

**역할:** 물리 계층에서 송수신된 데이터의 오류(주소 지정 체계와 데이터가 변조되지 않았음을 확증하기 위한 오류 확인하는 기능을 수행)를 감지하고 수정하며, 신뢰성 있는 데이터 전송을 보장한다. 또한, 데이터 전송을 위한 물리적 주소를(MAC) 지정한다.

양쪽의 데이터 속도가 일정하지 않으면 데이터가 손상될 수 있으므로 데이터의 양을 조정하는 ‘흐름제어’를 한다.

**주요 기능:**

- 프레임(Frame) 단위의 데이터 전송
- MAC 주소 기반 통신
- 오류 감지 및 수정 (CRC, FCS)
- 흐름 제어 (Flow Control)

**대표적인 장비 및 프로토콜:**

- 스위치(Switch), 브리지(Bridge)
- 이더넷(Ethernet), PPP(Point-to-Point Protocol)

---

## **3. 네트워크 계층 (Network Layer)**

**역할:** 데이터를 목적지까지 라우팅하고, 논리적인 주소(IP)를 기반으로 패킷을 전달하는 역할을 한다.

<aside>
  
**💡 라우팅(Routing)이란?**

**라우팅은** 여러 개의 네트워크가 연결되어 있을 때, 데이터 패킷을 목적지까지 가장 효율적으로 전달하기 위해 어떤 경로를 거쳐야 하는지, 최적의 경로를 결정하는 과정을 의미한다.

</aside>

<aside>

**💡 IP(Internet Protocol)란?**

**IP 주소**는 각각의 컴퓨터가 인터넷에 접속하기 위해 부여받은 고유한 주소이다.
목적지까지의 최적의 경로를 결정할 때, 라우터는 **목적지 IP 주소를 참조하여** 어느 경로를 통해 데이터를 전송할지 결정하게 된다.

---

💡 IP는 비연결형 프로토콜이기 때문에 데이터를 전송하기 전에 미리 연결을 하지 않는다. 

그렇기 때문에 신뢰성과 안정성 측면에서 한계가 있고, 이를 보완하기 위해 상위 계층에서 TCP를 사용한다.

</aside>

**주요 기능:**

- IP 주소를 이용한 논리적 주소 지정
- 라우팅(Routing) 기능 수행
- 패킷(Packet) 단위의 데이터 전송
- 경로 선택 (Path Selection)

**대표적인 장비 및 프로토콜:**

- 라우터(Router)
- IP(Internet Protocol), ICMP(Internet Control Message Protocol), ARP(Address Resolution Protocol)

---

## 4. 전송 계층 (Transport Layer)

**역할:** 포트번호를 관리하여 수신된 데이터가 어느 응용프로그램에 전송될지 판독하고, 데이터를 전송한다.

**주요 기능:**

- 연결 지향(확실한 전송)과 비연결 지향(빠른 전송) 방식 제공
- 데이터 흐름 제어 및 혼잡 제어
- 오류 검출 및 복구
- 세그먼트(segment) 단위의 데이터 전송

**대표적인 프로토콜:**

- TCP(Transmission Control Protocol) – 신뢰성 보장
- UDP(User Datagram Protocol) – 빠른 데이터 전송

<aside>


✅ **💡 TCP (Transmission Control Protocol)**

- **신뢰성 보장:** 데이터가 손실 없이 도착하도록 **재전송, 오류 검사, 순서 보장**
- **연결 지향적:** 데이터 전송 전에 송신자와 수신자가 **3-way Handshake**를 통해 연결 설정
- **속도 느림:** 신뢰성을 위해 추가적인 확인 과정 필요
- **사용 예시:** 웹사이트(HTTP/HTTPS), 이메일(SMTP), 파일 전송(FTP)

✅ **💡 UDP (User Datagram Protocol)**

- **신뢰성 없음:** 데이터가 손실될 수 있지만, 빠르게 전송 가능 (**오류 검사 X, 재전송 X**)
- **비연결 지향적:** 데이터 전송 전에 별도의 연결 설정 과정 없음
- **속도 빠름:** 추가적인 확인 과정 없이 바로 전송
- **사용 예시:** 온라인 게임, 실시간 스트리밍, VoIP(음성 통화)

📌 **정리:**

- **TCP는 신뢰성이 중요할 때 사용** (웹사이트, 이메일, 파일 다운로드)
- **UDP는 속도가 중요할 때 사용** (실시간 스트리밍, 온라인 게임, 화상통화)
</aside>

---

## 5. 세션 계층 (Session Layer)

**역할:** 응용 프로그램 간의 연결(Session)을 설정, 유지 및 종료하는 역할을 한다.

**주요 기능:**

- 세션 설정, 유지, 종료
- 동기화 및 체크포인트 관리
- 데이터 교환 방식 관리

**대표적인 프로토콜:**

- NetBIOS, RPC(Remote Procedure Call)

---

## 6. 표현 계층 (Presentation Layer)

**역할:** 응용계층으로부터 받은 데이터를 수신측에 알맞는 코드 및 형식으로 변환하거나, 그 반대의 과정을 수행한다.

예를 들어 송신 시에는 응용 계층으로부터 받은 데이터를 암호화 하고, 수신 시에는 암호화를 해제 후 데이터를 전달한다.

즉, 입력 또는 출력되는 데이터를 상호간 이해할 수 있는 포멧으로 변환한다.

**주요 기능:**

- 데이터 인코딩/디코딩
- 암호화/복호화 (Encryption/Decryption)
- 데이터 압축/해제

**대표적인 포맷 및 프로토콜:**

- JPEG, PNG, GIF (이미지 형식)
- MPEG, MP3 (멀티미디어 형식)
- SSL/TLS (보안 암호화)

---

## 7. 응용 계층 (Application Layer)

**역할:** 사용자와 직접 상호작용하는 계층으로, 애플리케이션이 네트워크를 통해 데이터를 송수신할 수 있도록 한다. 즉, 사용자와 직접 상호작용하는 소프트웨어를 지원한다.

**주요 기능:**

- 사용자 인터페이스 제공
- 네트워크 서비스 접근 및 이용
- 데이터 요청 및 응답 처리

**대표적인 프로토콜:**

- HTTP/HTTPS (웹 서비스)
- FTP (파일 전송)
- SMTP/POP3/IMAP (이메일 서비스)
- DNS (도메인 네임 서비스)

---

# OSI 7계층을 쉽게 이해하는 비유

## **📤 송신부(데이터 전송 과정)**

1️⃣ **응용 계층 (Application Layer)**

- 사용자가 웹 브라우저에서 "Hello" 메시지를 보냄
- 📬 **(비유)**: 편지를 작성하는 단계

2️⃣ **표현 계층 (Presentation Layer)**

- 데이터를 암호화(보안 적용)하고, 문자 인코딩(UTF-8 등) 적용
- 📬 **(비유)**: 편지를 특정 언어(한글, 영어 등)로 작성하는 단계

3️⃣ **세션 계층 (Session Layer)**

- 통신 연결을 설정하고 유지(메시지를 주고받을 준비)
- 📬 **(비유)**: 보내는 사람과 받는 사람이 서로 통신할 수 있도록 편지를 보낼 우체국을 선택하는 단계

4️⃣ **전송 계층 (Transport Layer)**

- 데이터를 TCP(신뢰성 보장) 또는 UDP(빠른 전송) 방식으로 나눠 보냄
- 📬 **(비유)**: 편지를 여러 장으로 나눠 우체국에 전달하는 과정

5️⃣ **네트워크 계층 (Network Layer)**

- 목적지 IP 주소를 지정하여 데이터가 어디로 가야 할지 결정
- 📬 **(비유)**: 받는 사람의 집 주소를 편지에 적는 단계

6️⃣ **데이터 링크 계층 (Data Link Layer)**

- MAC 주소를 사용하여 목적지까지의 경로를 찾고 오류를 수정
- 📬 **(비유)**: 우체국에서 배달 경로(택배 기사, 우편 트럭)를 결정하는 과정

7️⃣ **물리 계층 (Physical Layer)**

- 데이터를 전기 신호 또는 무선 신호로 변환하여 전송
- 📬 **(비유)**: 우체부가 편지를 직접 들고 배달하는 과정

---

## **📥 수신부(데이터 수신 과정)**

7️⃣ **물리 계층 (Physical Layer)**

- 전송된 신호(전기 신호, 무선 신호)를 수신
- 📬 **(비유)**: 편지를 우체부가 배달해줌

6️⃣ **데이터 링크 계층 (Data Link Layer)**

- MAC 주소를 확인하여 본인이 받을 편지인지 확인, 오류 수정
- 📬 **(비유)**: 우편함에서 내 이름이 적힌 편지를 찾는 과정

5️⃣ **네트워크 계층 (Network Layer)**

- 목적지 IP 주소를 확인하고, 내 컴퓨터로 전달
- 📬 **(비유)**: 내 집 주소가 맞는지 확인하고 집 안으로 편지를 들고 들어가는 과정

4️⃣ **전송 계층 (Transport Layer)**

- 데이터 조각을 재조립하고, 손실된 데이터가 있으면 다시 요청
- 📬 **(비유)**: 여러 장의 편지를 원래 순서대로 정리하여 확인하는 과정

3️⃣ **세션 계층 (Session Layer)**

- 송신부와의 연결을 유지하며 필요한 데이터를 계속 주고받음
- 📬 **(비유)**: 보낸 사람과 계속 연락을 유지하는 과정

2️⃣ **표현 계층 (Presentation Layer)**

- 데이터 압축 해제, 암호 해독(복호화), 인코딩 변환
- 📬 **(비유)**: 편지를 읽을 수 있도록 펼치고 이해할 수 있는 언어로 변환하는 과정

1️⃣ **응용 계층 (Application Layer)**

- 사용자가 데이터를 볼 수 있도록 브라우저, 이메일 등에서 표시
- 📬 **(비유)**: 편지를 읽고 이해하는 과정

---

# 추가 조사

## L3 스위치

🔹 **VLAN (Virtual Local Area Network)**

VLAN은 하나의 물리적인 네트워크를 논리적으로 여러 개의 네트워크로 나누는 기술이다.
같은 물리적 스위치에 연결된 장비라도 VLAN ID가 다르면 서로 통신할 수 없다.
즉, 네트워크 트래픽을 논리적으로 분리하여 보안성을 높이고, 네트워크 성능을 개선하는 역할을 한다.

🔹 **L2 스위치 (Layer 2 Switch)**

L2 스위치는 MAC 주소 기반으로 네트워크 트래픽을 전달하는 네트워크 장비다.

**기본 역할**: 같은 네트워크(VLAN 내)에서 장치 간 통신을 수행

**단점**: 서로 다른 VLAN 간의 통신을 지원하지 않음
즉, L2 스위치는 VLAN 내부에서만 통신 가능하며, VLAN 간 라우팅을 수행할 수 없다.
이 문제를 해결하기 위해 L3 스위치가 필요하다.

🔹 **L3 스위치 (Layer 3 Switch)**

L3 스위치는 IP 주소 기반 라우팅이 가능한 스위치로, VLAN 간 통신을 가능하게 한다.
일반적인 라우터와 비슷한 기능을 수행하지만, 하드웨어 기반으로 더 빠르게 데이터 패킷을 전달할 수 있다.

✔ **L3 스위치의 주요 기능**

- **VLAN 간 라우팅**: 서로 다른 VLAN에 있는 장비들이 통신할 수 있도록 함
- **IP 주소 기반 패킷 전달**: L2 스위치처럼 MAC 주소를 사용하지만, IP 주소를 기반으로 데이터 경로를 설정 가능
- **라우터보다 빠른 처리 속도**: 하드웨어 레벨에서 패킷 전달을 최적화하여 네트워크 속도가 빠름

## **Keep-Alive vs 웹소켓**

🔹 **1. Keep-Alive**

Keep-Alive는 HTTP에서 연결을 지속적으로 유지하여 여러 요청을 하나의 연결에서 처리할 수 있도록 하는 기술이다.

✔ **특징**

- 기본적으로 단방향 통신 (Request-Response 기반)
- HTTP/1.0에서는 기본적으로 비활성화, HTTP/1.1에서는 기본 활성화됨
- 클라이언트가 서버에 요청을 보낼 때마다 새로운 연결을 맺지 않고, 기존 연결을 재사용하여 오버헤드를 줄임
- 연결이 일정 시간 유지되지만, 서버가 주기적으로 클라이언트에게 데이터를 보내는 실시간 통신에는 적합하지 않음
  
✔ **사용 사례**

- 일반적인 웹 페이지 요청 (HTML, CSS, JS, 이미지 등)
- REST API 통신 최적화

🔹 **2. WebSocket**

WebSocket은 클라이언트와 서버 간 양방향 통신이 가능한 지속적인 연결을 제공하는 프로토콜이다.

✔ **특징**

- 클라이언트와 서버가 서로 데이터를 주고받을 수 있음 (Full-Duplex 통신)
- HTTP보다 오버헤드가 적고 실시간 데이터 전송에 최적화됨
- 한 번 연결이 설정되면 지속적인 데이터 전송 가능 (Polling 불필요)
- 연결이 유지되는 동안 서버가 클라이언트에게 푸시 메시지를 보낼 수 있음

✔ **사용 사례**

- 채팅 애플리케이션
- 실시간 알림 시스템
- 온라인 게임
- 주식/환율 실시간 데이터

### **결론**
Keep-Alive는 HTTP 요청을 최적화하는 방식으로, 실시간 통신보다는 연결 유지에 초점을 맞춤
WebSocket은 실시간 데이터 전송이 필요한 경우 적합하며, 채팅, 알림, 게임 등에서 효과적
