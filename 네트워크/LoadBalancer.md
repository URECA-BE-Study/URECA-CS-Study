## 박상윤

### 로드 밸런서가 필요한 이유

- 하나의 서버로는 급증하는 트래픽을 안정적으로 처리하기 어려움
- 서버 과부하 → 성능 저하 또는 다운 → 서비스 불가

### 해결 방법

- **Scale-Up**: 서버의 CPU, 메모리 등 자원 업그레이드
- **Scale-Out**: 서버를 여러 대로 나눠 처리 (이때 로드밸런서 필요)


### 로드 밸런서란?

> 클라이언트로부터 들어온 요청을 여러 서버에 분산하여 안정적이고 효율적인 서비스를 제공하는 기술 또는 장치

### 특징

- **서버풀(Server Pool)** 구성
- **VIP (Virtual IP)** 통해 요청 분산
- 트래픽 부하 감소, 고가용성 보장, 보안 강화, 유연한 확장성 제공


### 주요 기능

| 기능 | 설명 |
|------|------|
| **Health Check** | 서버 상태를 주기적으로 점검하여 비정상 서버를 제외 |
| **NAT** | 공인 IP와 사설 IP 간 주소 변환 (SNAT, DNAT) |
| **DSR** | 서버가 클라이언트에 직접 응답하여 로드밸런서 부하 감소 |
| **Tunneling** | 데이터를 캡슐화해 보호된 통신 지원 |
| **Sticky Session** | 같은 클라이언트 요청을 항상 동일한 서버로 전달 |
| **SSL Termination** | SSL 복호화를 로드밸런서에서 처리하여 서버 부하 감소 |


### 계층별 로드 밸런서 비교 (L4 vs L7)

| 구분 | L4 (Transport) | L7 (Application) |
|------|----------------|------------------|
| 계층 | TCP, UDP | HTTP, HTTPS |
| 기준 | IP, Port | URL, 헤더, 쿠키 등 |
| 장점 | 빠름, 저렴함 | 정교한 라우팅, 보안 강화 |
| 단점 | 세분화된 라우팅 어려움 | 복호화 부하 발생, 비용 증가 |
| 예시 | 게임 서버, 영상 스트리밍 | REST API, 웹앱 라우팅 |



### 트래픽 분산 알고리즘

- **Round Robin**: 서버에 순차적으로 요청 분배
- **Weighted Round Robin**: 서버마다 가중치 부여
- **Least Connections**: 연결 수 가장 적은 서버 선택
- **Least Response Time**: 응답 속도가 가장 빠른 서버 선택
- **IP Hash**: 클라이언트 IP 기준으로 서버 고정 연결



### DNS 라운드 로빈 (간단한 부하 분산)

- DNS에 여러 IP를 등록 → 클라이언트 요청 시 하나씩 반환
- **장점**: 간단, 별도 장비 필요 없음
- **단점**:
    - 캐싱으로 인해 분산 불균등
    - 장애 서버 감지 불가 (Health Check 없음)



### AWS 로드밸런서 종류

| 이름 | 계층 | 특징 | 적합한 환경 |
|------|------|------|--------------|
| **ALB** | L7 | URL/헤더 기반 라우팅, HTTP/HTTPS 지원 | 웹 API, 마이크로서비스 |
| **NLB** | L4 | TCP/UDP 기반 고성능 분산, 고정 IP 제공 | 실시간 서비스, 게임 |
| **GLB** | L3~L4 | 보안 장비 연동에 최적화 | IDS/IPS 등 |
| **CLB** | L4+L7 | 구버전, 현재는 ALB/NLB 권장 | - |



### 실전 구성 예시 (AWS 기반)

- **ALB**: 요청에 따라 API 분기, 인증 처리
- **NLB**: 빠른 전송 처리 필요 시 사용 (TCP 기반)
- **CloudFront/WAF**: 캐싱과 보안 필터링 강화



### 로드밸런서 구성 시 주의 사항

- **Health Check 설정 필수**: 장애 서버 자동 제거
- **세션 유지 필요 시 Sticky Session 또는 Redis 등 사용**
- **SSL 종료**는 로드밸런서에서 수행하여 서버 부담 경감
- **멀티 AZ 구성**으로 단일 장애 지점(SPOF) 방지



### 정리

- 로드 밸런서는 현대 웹 서비스에서 **성능, 확장성, 안정성**을 동시에 책임지는 핵심 인프라 요소
- AWS와 같은 클라우드 환경에서는 다양한 유형의 로드밸런서를 제공하며, 상황에 맞는 선택이 중요
- 단순히 트래픽 분산만이 아닌, **보안**, **세션 처리**, **장애 대응**, **스케일링 전략**과도 밀접한 관련이 있음